
<h2 class="mt-3">Ajouter un utilisateur</h2>


<!-- Contrôle de formulaire -->
<form #f="ngForm" (submit)="onSubmitUtilisateur($event,f)">
  <div class="form-group">
      <label for="nom">Identifiant :</label>
      <!-- le champ doit avoir min 3 caractères et max 255 -->
      <input
          name="nom"
          class="form-control"
          ngModel
          #nom="ngModel"
          required
          minlength="3"
          maxlength="255"
          [(ngModel)]="nom_input"
          placeholder="Nom"
      >

      <!-- Messages en cas d'erreurs -->
      <div class="alert alert-danger" *ngIf="nom.touched && !nom.valid">
          <p *ngIf="nom.errors.required">Veuillez compléter le champ nom</p>
          <p *ngIf="nom.errors.minlength">Le champ nom doit avoir 3 caractères au minimum</p>
          <p *ngIf="nom.errors.maxlength">Le champ nom doit avoir 255 caractères au maximum</p>
          <p *ngIf="nom.errors.pattern">Le champ nom n'est pas conforme</p>
      </div>

      <input
      name="prenom"
      class="form-control"
      ngModel
      #prenom="ngModel"
      required
      minlength="3"
      maxlength="255"
      [(ngModel)]="prenom_input"
      placeholder="Prenom"
  >

  <!-- Messages en cas d'erreurs -->
  <div class="alert alert-danger" *ngIf="prenom.touched && !prenom.valid">
      <p *ngIf="prenom.errors.required">Veuillez compléter le champ prenom</p>
      <p *ngIf="prenom.errors.minlength">Le champ prenom doit avoir 3 caractères au minimum</p>
      <p *ngIf="prenom.errors.maxlength">Le champ prenom doit avoir 255 caractères au maximum</p>
      <p *ngIf="prenom.errors.pattern">Le champ prenom n'est pas conforme</p>
  </div>
  </div>
  <div class="form-group">
    <label for="email">Email</label>
    <div class="input-group mb-3">
      <div class="input-group-prepend"> <!--prepend a gauche et apend a droite-->
        <span class="input-group-text" id="basic-addon1">@</span>
      </div>
      <input
          type="text"
          name="email"
          class="form-control"
          ngModel
          placeholder="exemple : jule@gmail.com"
          #email="ngModel"
          required
          minlength="3"
          maxlength="255"
          pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
          [(ngModel)]="email_input"
      >
  </div>
    <div class="alert alert-danger" *ngIf="email.touched && !email.valid">
        <p *ngIf="email.errors.required">Veuillez compléter le champ email</p>
        <p *ngIf="email.errors.minlength">Le champ email doit avoir 3 caractères au minimum</p>
        <p *ngIf="email.errors.maxlength">Le champ email doit avoir 255 caractères au maximum</p>
        <p *ngIf="email.errors.pattern">Le champ email n'est pas conforme</p>
    </div>
  </div>

  <div class="form-group">
    <label for="login">Mot de passe :</label>
    <input
      type="text"
      class="form-control"
      id="login"
      name="login"
      placeholder="mot de passe"
      ngModel
      #login="ngModel"
    />
  </div>

  <!-- Liste des rôles-->
  <div class="form-group">
    <label for="FormControlSelect1">Rôles</label>
    <select class="form-control" id="FormControlSelect1">
      <option selected>Type de rôles... </option>
      <option>Administrateur</option>
      <option>Rédacteur</option>
      <option>Utilisateur</option>
    </select>
  </div>

  <!-- Bouton pour valider reste invalide si tout les champs ne sont pas correct -->
  <div class="form-group">
      <input
        type="submit"
        class="btn btn-primary"
        [disabled]="!f.valid"
      >
  </div>

  <!-- lien retour au menu -->
  <div >
    <a routerLink = "/admin/users/liste-user">Retour à la liste</a>
  </div>
  <!-- Message si tout est ok -->
  <div class="alert alert-success" *ngIf="success">
    Votre demande d'ajout à bien été valider!
  </div>
</form>
